<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd        http://camel.apache.org/schema/spring       http://camel.apache.org/schema/spring/camel-spring.xsd">
    <bean class="org.awda.middleware.util.KillRoute" id="killRoute" scope="singleton"/>
    <bean class="org.awda.middleware.bs.PayloadProcess"
        id="processPayload" scope="singleton"/>
    <bean class="org.awda.middleware.util.MessageValidator"
        id="payloadValidator" scope="singleton"/>
    <!--routeContext id will be used as reference on camel-context.xml -->
    <routeContext id="routeBS7" xmlns="http://camel.apache.org/schema/spring">
        <route id="_route1_bs7">
            <from id="_from1_bs7" uri="direct:route_bs7"/>
            <wireTap id="_wireTap1_bs7" uri="direct:gen_log">
                <body>
                    <simple>${body}</simple>
                </body>
            </wireTap>
            <process id="_init_strategy_bs_reg_log_bs7" ref="killRoute"/>
            <convertBodyTo id="_convertBodyTo1_bs7" type="java.lang.String"/>
            <doTry id="_doTry1">
                <bean id="_bean4_bs7" ref="payloadValidator"/>
                <to id="_to1_bs7" uri="direct:gen_sign"/>
                <log id="_log1_bs7" message="Payload to Core : ${body}"/>
                <wireTap id="_wireTap2_bs7" uri="direct:gen_log">
                    <body>
                        <simple>${body}</simple>
                    </body>
                </wireTap>
                <to id="_to2_bs7" uri="https4://{{bs.env}}{{service.reglog.url}}?bridgeEndpoint=true&amp;connectionClose=true&amp;throwExceptionOnFailure=false"/>
                <wireTap id="_wireTap3_bs7" uri="direct:gen_log"/>
                <doCatch id="_doCatch1_bs7">
                    <exception>java.io.IOException</exception>
                    <exception>java.lang.StringIndexOutOfBoundsException</exception>
                    <exception>org.apache.camel.component.file.GenericFileOperationFailedException</exception>
                    <exception>java.lang.NullPointerException</exception>
                    <exception>java.lang.IllegalArgumentException</exception>
                    <exception>org.apache.camel.ExpressionEvaluationException</exception>
                    <exception>org.apache.camel.CamelExchangeException</exception>
                    <exception>org.apache.camel.language.bean.RuntimeBeanExpressionException</exception>
                    <exception>org.apache.camel.InvalidPayloadException</exception>
                    <exception>org.apache.camel.NoTypeConversionAvailableException</exception>
                    <log id="co_log9" message="Error Message : ${exception.message}, Body : ${body}"/>
                    <setHeader headerName="Exchange.HTTP_RESPONSE_CODE" id="co_setHeader13_bs7">
                        <constant>500</constant>
                    </setHeader>
                    <convertBodyTo id="_convertBodyTo3_bs7" type="java.lang.String"/>
                    <setBody id="co_setBody6_bs7">
                        <simple>Internal Server Error</simple>
                    </setBody>
                </doCatch>
            </doTry>
        </route>
    </routeContext>
</beans>
